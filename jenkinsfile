pipeline {
    agent any
tools 
{
maven 'M2_HOME'
}
 environment { 

        registry = "waelbannani/tpachat" 

        registryCredential = 'dockerhub' 
        
            NEXUS_VERSION ="nexus3"
            NEXUS_PROTOCOL="http"
            NEXUS_URL="http://172.10.0.140:8081"
            NEXUS_REPOSITORY="nexusrepo"
            NEXUS_CREDENTIALS_ID="nexusrepo"
        dockerImage = '' 

    }
    
    stages {
        stage('Checkout GIT') {
            steps {
                git branch:'wael',
                url:'https://github.com/waelbannani22/tpAchatProject'
                
              

            }
        }
        stage('MVN CLEAN')
        {
        steps {
        sh """mvn -version"""
        sh 'mvn clean'
        }
        
        }
        stage('MVN COMPILE')
        {
        steps {
        sh 'mvn compile'
        }
        }
        
        
       
       
        /*stage('MVN SONARQUBE')
        {
        steps{
        sh 'mvn sonar:sonar -Dsonar.login=admin -Dsonar.password=esprit'
        }
        }
             stage('MVN INSTALL')
        {
        steps {
        sh 'mvn install'
        }
        }
         stage('MVN NEXUS')
        {
        steps {
        sh 'mvn clean deploy'
        }
        }
        */
        stage('Docker compose ')
        {
        steps {
        sh 'docker-compose up'
        }
        }
       


        
    }
    
}

